1
00:00:07,516 --> 00:00:15,500
[ Music ]


2
00:00:22,516 --> 00:00:27,906
[ Applause ]


3
00:00:28,406 --> 00:00:29,736
>> Good afternoon and welcome


4
00:00:29,736 --> 00:00:31,566
everybody to our session, what's


5
00:00:31,566 --> 00:00:33,366
new in user notifications.


6
00:00:33,986 --> 00:00:35,316
I'm Kritarth Jain [inaudible] on


7
00:00:35,316 --> 00:00:38,066
the iOS notifications team, and


8
00:00:38,066 --> 00:00:39,956
we're very excited to be back at


9
00:00:39,956 --> 00:00:42,316
WWDC to share with you all the


10
00:00:42,316 --> 00:00:43,896
new and exciting features around


11
00:00:43,896 --> 00:00:45,566
user notifications that your


12
00:00:45,566 --> 00:00:47,036
applications can start using


13
00:00:47,246 --> 00:00:48,116
with iOS 12.


14
00:00:49,476 --> 00:00:51,446
Today, we will be going over a


15
00:00:51,446 --> 00:00:53,086
range of topics as you can see


16
00:00:53,086 --> 00:00:54,256
from the list here.


17
00:00:54,526 --> 00:00:56,286
We will start with talking about


18
00:00:56,286 --> 00:00:57,996
grouped notifications, a new


19
00:00:57,996 --> 00:00:59,696
paradigm that we've introduced


20
00:00:59,876 --> 00:01:01,476
to iOS notifications when


21
00:01:01,476 --> 00:01:02,736
presented in the user's


22
00:01:02,736 --> 00:01:03,646
notification list.


23
00:01:04,626 --> 00:01:05,896
Then we'll talk about


24
00:01:05,896 --> 00:01:07,546
notification content extensions,


25
00:01:07,886 --> 00:01:09,106
which are existing extension


26
00:01:09,106 --> 00:01:10,696
points with notifications, and


27
00:01:10,696 --> 00:01:12,226
discuss new APIs that you've


28
00:01:12,226 --> 00:01:13,266
added around these.


29
00:01:14,606 --> 00:01:15,906
Then, we'll cover notification


30
00:01:15,906 --> 00:01:17,816
management and talk about all


31
00:01:17,816 --> 00:01:19,116
the new ways in which your


32
00:01:19,116 --> 00:01:20,916
application users can now tweak


33
00:01:20,916 --> 00:01:22,636
your notification settings and


34
00:01:22,636 --> 00:01:24,226
what you need to do to respond


35
00:01:24,426 --> 00:01:25,366
to these new options.


36
00:01:26,556 --> 00:01:27,976
Then, we'll cover provisional


37
00:01:27,976 --> 00:01:29,936
authorization, which allows your


38
00:01:29,936 --> 00:01:31,806
applications to have a trial


39
00:01:31,806 --> 00:01:33,706
phase for sending notifications


40
00:01:33,706 --> 00:01:35,676
to users without their explicit


41
00:01:35,676 --> 00:01:37,366
permission but do it quietly.


42
00:01:38,596 --> 00:01:40,266
And lastly, we'll cover critical


43
00:01:40,266 --> 00:01:42,006
alerts, which allows your


44
00:01:42,006 --> 00:01:43,816
applications to send important


45
00:01:43,816 --> 00:01:45,446
notifications to the users,


46
00:01:46,036 --> 00:01:47,996
which bypass certain system


47
00:01:47,996 --> 00:01:49,846
settings if your users allows


48
00:01:49,846 --> 00:01:51,026
your applications to do so.


49
00:01:51,886 --> 00:01:53,146
So there's a range of topics to


50
00:01:53,146 --> 00:01:54,736
be covered today, and let's


51
00:01:54,736 --> 00:01:56,316
begin with looking at grouped


52
00:01:56,346 --> 00:01:57,136
notifications.


53
00:01:57,136 --> 00:02:01,356
Now up to iOS 11, all new


54
00:02:01,356 --> 00:02:02,586
incoming notifications for the


55
00:02:02,586 --> 00:02:04,426
users were inserted in a


56
00:02:04,426 --> 00:02:05,816
chronological order in the


57
00:02:05,816 --> 00:02:06,756
notification list.


58
00:02:07,276 --> 00:02:08,735
So these would be interspersed


59
00:02:08,735 --> 00:02:10,376
across multiple applications,


60
00:02:10,705 --> 00:02:12,006
and it would be hard for the


61
00:02:12,006 --> 00:02:13,886
user to find a certain


62
00:02:13,886 --> 00:02:15,656
notification or triage multiple


63
00:02:15,656 --> 00:02:16,746
notifications together.


64
00:02:17,796 --> 00:02:20,346
So starting in iOS 12, we've


65
00:02:20,346 --> 00:02:22,216
decided to improve this by


66
00:02:22,216 --> 00:02:23,676
introducing notification


67
00:02:23,676 --> 00:02:25,696
grouping, so now, as you can see


68
00:02:25,696 --> 00:02:27,586
here, all notifications across


69
00:02:27,586 --> 00:02:29,076
different applications get


70
00:02:29,076 --> 00:02:30,526
grouped into their unique


71
00:02:30,526 --> 00:02:31,036
groups.


72
00:02:32,056 --> 00:02:33,616
Let's take a deeper look at how


73
00:02:33,616 --> 00:02:34,866
grouped notifications works.


74
00:02:36,016 --> 00:02:38,426
Now all these notifications will


75
00:02:38,426 --> 00:02:39,856
be automatically grouped, so


76
00:02:39,856 --> 00:02:41,586
there's nothing explicit that


77
00:02:41,716 --> 00:02:43,626
you need to do to start using


78
00:02:43,706 --> 00:02:44,996
notification grouping.


79
00:02:45,406 --> 00:02:47,016
However, if you do want to have


80
00:02:47,136 --> 00:02:49,426
your own custom groups then you


81
00:02:49,426 --> 00:02:51,176
can use the thread identifier,


82
00:02:51,556 --> 00:02:53,566
which is an existing property on


83
00:02:53,746 --> 00:02:55,556
the UN notification content


84
00:02:55,556 --> 00:02:55,996
object.


85
00:02:57,646 --> 00:02:59,096
So some of you might already be


86
00:02:59,096 --> 00:03:01,276
using the thread identifier and


87
00:03:01,276 --> 00:03:02,406
for a local notification.


88
00:03:02,536 --> 00:03:03,636
You can set it on the


89
00:03:03,806 --> 00:03:05,606
UNMutableNotificationContent


90
00:03:05,606 --> 00:03:06,906
object as seen here.


91
00:03:08,056 --> 00:03:10,096
And for a remote notification


92
00:03:10,096 --> 00:03:11,876
payload, you can also include it


93
00:03:11,876 --> 00:03:13,366
as part of your notification


94
00:03:13,366 --> 00:03:13,706
payload.


95
00:03:15,756 --> 00:03:17,816
Now the thread identifier might


96
00:03:17,816 --> 00:03:19,286
be familiar to some of you


97
00:03:19,286 --> 00:03:19,696
already.


98
00:03:20,996 --> 00:03:23,616
We use it today for forwarding


99
00:03:23,616 --> 00:03:25,486
notifications to a notification


100
00:03:25,486 --> 00:03:27,126
content extension that is


101
00:03:27,126 --> 00:03:28,976
presented for your application,


102
00:03:29,176 --> 00:03:30,406
which has the exact same thread


103
00:03:30,406 --> 00:03:32,336
identifier, allowing the content


104
00:03:32,336 --> 00:03:33,986
extension view to update it


105
00:03:34,026 --> 00:03:35,176
based on the new incoming


106
00:03:35,176 --> 00:03:35,846
notification.


107
00:03:37,256 --> 00:03:39,346
Starting in iOS 11, we started


108
00:03:39,346 --> 00:03:41,536
using the thread identifier for


109
00:03:41,536 --> 00:03:43,386
doing grouping of notifications,


110
00:03:43,386 --> 00:03:44,806
if the user had turned on


111
00:03:45,076 --> 00:03:45,826
[inaudible] notification


112
00:03:45,826 --> 00:03:46,326
previous.


113
00:03:47,156 --> 00:03:48,126
So we're just taking this


114
00:03:48,126 --> 00:03:50,006
concept and expanding it for all


115
00:03:50,006 --> 00:03:51,096
notifications in general.


116
00:03:52,756 --> 00:03:54,726
So how does this grouping work?


117
00:03:55,446 --> 00:03:57,166
So when a new notification comes


118
00:03:57,166 --> 00:03:59,676
in to you, the user's device, if


119
00:03:59,676 --> 00:04:01,556
there is no thread identifier


120
00:04:01,676 --> 00:04:03,826
set on this notification, then


121
00:04:04,246 --> 00:04:05,496
this notifications gets grouped


122
00:04:05,496 --> 00:04:06,926
with the application bundle.


123
00:04:08,146 --> 00:04:09,746
We can see that from our sample


124
00:04:09,746 --> 00:04:11,476
application here, that as new


125
00:04:11,476 --> 00:04:13,496
notifications are incoming, they


126
00:04:13,496 --> 00:04:14,446
are getting bundled with the


127
00:04:14,446 --> 00:04:16,796
same group and the group is


128
00:04:16,796 --> 00:04:17,986
getting updated with the latest


129
00:04:17,986 --> 00:04:18,406
content.


130
00:04:18,476 --> 00:04:20,286
And then the user can simply


131
00:04:20,286 --> 00:04:21,766
expand this notification group


132
00:04:21,935 --> 00:04:23,266
to see all the notifications


133
00:04:23,266 --> 00:04:27,086
that are present in that group.


134
00:04:27,276 --> 00:04:28,706
On the other hand, if the


135
00:04:28,706 --> 00:04:30,296
notification does have a thread


136
00:04:30,296 --> 00:04:32,536
identifier set on it, then it


137
00:04:32,536 --> 00:04:33,976
gets grouped with all the other


138
00:04:33,976 --> 00:04:35,556
notifications from that same


139
00:04:35,556 --> 00:04:37,436
application with that exact same


140
00:04:37,436 --> 00:04:38,116
thread ID.


141
00:04:39,246 --> 00:04:40,666
What this also means is that the


142
00:04:40,666 --> 00:04:42,296
same application can then have


143
00:04:42,296 --> 00:04:43,446
multiple different custom


144
00:04:43,446 --> 00:04:44,596
groups, depending upon the


145
00:04:44,596 --> 00:04:46,046
unique thread identifiers that


146
00:04:46,046 --> 00:04:46,806
you're setting on them.


147
00:04:47,326 --> 00:04:50,346
A good example of this is the


148
00:04:50,346 --> 00:04:52,166
messages application, where here


149
00:04:52,166 --> 00:04:53,176
you can see there are two


150
00:04:53,176 --> 00:04:54,996
different threads, and as new


151
00:04:55,136 --> 00:04:56,596
notifications are incoming, they


152
00:04:56,596 --> 00:04:57,636
are going to their own


153
00:04:57,636 --> 00:04:58,556
respective groups.


154
00:04:59,016 --> 00:05:02,516
And then the user can expand a


155
00:05:02,516 --> 00:05:03,906
specific group to see all the


156
00:05:03,906 --> 00:05:05,356
notifications that are part of


157
00:05:05,396 --> 00:05:05,786
that group.


158
00:05:06,956 --> 00:05:07,926
So by using the thread


159
00:05:07,926 --> 00:05:09,676
identifier, messages is able to


160
00:05:09,676 --> 00:05:12,276
do so.


161
00:05:12,516 --> 00:05:14,426
Now, your application users also


162
00:05:14,426 --> 00:05:16,356
have the option of tweaking this


163
00:05:16,356 --> 00:05:17,636
notification grouping setting


164
00:05:17,956 --> 00:05:19,276
from your per application


165
00:05:19,276 --> 00:05:20,526
notification setting's page.


166
00:05:21,426 --> 00:05:23,216
Here, they get three options.


167
00:05:23,696 --> 00:05:25,536
If they choose automatic, then


168
00:05:25,536 --> 00:05:26,756
they get the behavior that we


169
00:05:26,756 --> 00:05:27,496
just described.


170
00:05:28,836 --> 00:05:30,786
However, the user also has the


171
00:05:30,786 --> 00:05:32,286
option of just grouping by


172
00:05:32,286 --> 00:05:34,146
application, where the system


173
00:05:34,146 --> 00:05:35,156
will ignore your thread


174
00:05:35,156 --> 00:05:36,706
identifier and group all


175
00:05:36,706 --> 00:05:38,376
notifications into a single


176
00:05:38,376 --> 00:05:39,246
group.


177
00:05:39,996 --> 00:05:41,846
And if the user wants the same


178
00:05:41,846 --> 00:05:43,926
behavior as it exists in iOS 11


179
00:05:43,926 --> 00:05:45,596
today, then they can simply turn


180
00:05:45,596 --> 00:05:46,586
off grouping for your


181
00:05:46,586 --> 00:05:47,806
applications' notifications.


182
00:05:48,486 --> 00:05:49,926
So do keep this in mind when


183
00:05:49,926 --> 00:05:50,986
you're creating your own custom


184
00:05:50,986 --> 00:05:53,436
groups that they create enough


185
00:05:53,436 --> 00:05:55,486
value for users when they


186
00:05:55,486 --> 00:05:56,516
receive your applications'


187
00:05:56,516 --> 00:05:57,246
notifications.


188
00:05:58,756 --> 00:06:00,606
Now what are the different


189
00:06:00,606 --> 00:06:01,956
components of a notification


190
00:06:01,956 --> 00:06:02,186
group?


191
00:06:03,386 --> 00:06:05,076
The content that we show is for


192
00:06:05,076 --> 00:06:06,696
the latest notification that was


193
00:06:06,696 --> 00:06:08,106
received as part of that group.


194
00:06:08,546 --> 00:06:11,996
And then the user can simply see


195
00:06:11,996 --> 00:06:13,936
all the notifications by tapping


196
00:06:13,936 --> 00:06:16,166
on this group, and we expand all


197
00:06:16,166 --> 00:06:17,196
the notifications' content.


198
00:06:17,196 --> 00:06:19,086
And then the user can interact


199
00:06:19,086 --> 00:06:20,356
with all these notifications


200
00:06:20,356 --> 00:06:21,216
individually as well.


201
00:06:22,236 --> 00:06:23,876
The two buttons at the top give


202
00:06:23,876 --> 00:06:25,246
the users much greater control


203
00:06:25,246 --> 00:06:26,956
like collapsing the stack as


204
00:06:26,956 --> 00:06:28,146
well as clearing all these


205
00:06:28,146 --> 00:06:29,466
notifications together.


206
00:06:32,156 --> 00:06:34,206
Now, notification grouping also


207
00:06:34,206 --> 00:06:35,806
makes triaging of notifications


208
00:06:36,066 --> 00:06:36,646
much better.


209
00:06:37,036 --> 00:06:38,446
For example, in this case, the


210
00:06:38,746 --> 00:06:39,896
user can clear all these


211
00:06:39,896 --> 00:06:41,526
notifications together by simply


212
00:06:41,526 --> 00:06:43,116
swiping to the right and tapping


213
00:06:43,116 --> 00:06:43,526
clear all.


214
00:06:46,156 --> 00:06:47,916
Apart from the content of the


215
00:06:47,916 --> 00:06:49,936
notification group, we also show


216
00:06:50,026 --> 00:06:50,986
a summary text.


217
00:06:51,436 --> 00:06:52,906
Now, this summary text, by


218
00:06:52,906 --> 00:06:54,886
default, shows the count of all


219
00:06:54,886 --> 00:06:56,486
the notifications that are part


220
00:06:56,486 --> 00:06:57,126
of that group.


221
00:06:58,436 --> 00:07:00,276
However, you can also create a


222
00:07:00,276 --> 00:07:02,046
custom summary text so you can


223
00:07:02,046 --> 00:07:03,756
give your users much better


224
00:07:03,756 --> 00:07:05,556
context of what kind of


225
00:07:05,556 --> 00:07:07,016
information is included in that


226
00:07:07,016 --> 00:07:07,906
group.


227
00:07:09,016 --> 00:07:11,066
Now, we will cover this API and


228
00:07:11,516 --> 00:07:14,276
go over much larger use cases of


229
00:07:14,276 --> 00:07:15,586
how you can create your custom


230
00:07:15,586 --> 00:07:17,406
groups in the advanced session


231
00:07:17,496 --> 00:07:18,236
around using group


232
00:07:18,236 --> 00:07:19,686
notifications, which will follow


233
00:07:19,686 --> 00:07:20,136
this session.


234
00:07:22,036 --> 00:07:23,846
So let's do a quick summary of


235
00:07:23,846 --> 00:07:25,156
group notifications as we saw


236
00:07:25,156 --> 00:07:26,026
them today.


237
00:07:26,696 --> 00:07:28,126
Starting in iOS 12, all


238
00:07:28,126 --> 00:07:29,966
application notifications are


239
00:07:29,966 --> 00:07:30,666
going to be grouped


240
00:07:30,666 --> 00:07:31,376
automatically.


241
00:07:31,886 --> 00:07:34,646
You can start using the thread


242
00:07:34,646 --> 00:07:36,486
identifier if you want to create


243
00:07:36,486 --> 00:07:38,056
your own custom groups for your


244
00:07:38,056 --> 00:07:40,896
applications, but the user does


245
00:07:40,896 --> 00:07:42,736
have the option of changing this


246
00:07:42,736 --> 00:07:43,806
grouping setting for your


247
00:07:43,806 --> 00:07:45,166
applications' notifications.


248
00:07:47,096 --> 00:07:48,486
And lastly, you can use the


249
00:07:48,486 --> 00:07:50,716
summary text for customizing the


250
00:07:50,716 --> 00:07:51,996
information you want to provide


251
00:07:51,996 --> 00:07:53,986
the user around the notification


252
00:07:53,986 --> 00:07:55,006
groups that you're creating.


253
00:07:55,256 --> 00:07:58,706
All right, so that was group


254
00:07:58,706 --> 00:07:59,426
notifications.


255
00:07:59,926 --> 00:08:01,416
Now, let's move on to the next


256
00:08:01,416 --> 00:08:03,016
topic and talk about


257
00:08:03,016 --> 00:08:04,706
notification content extensions.


258
00:08:05,236 --> 00:08:07,466
Now, some of you might already


259
00:08:07,466 --> 00:08:08,606
be familiar with these content


260
00:08:08,606 --> 00:08:10,056
extensions that we included with


261
00:08:10,136 --> 00:08:10,716
iOS 10.


262
00:08:11,976 --> 00:08:13,726
Content extensions allow your


263
00:08:13,726 --> 00:08:15,776
applications to present a rich


264
00:08:15,776 --> 00:08:17,686
notification view around the


265
00:08:18,006 --> 00:08:20,076
user's notifications, so you can


266
00:08:20,076 --> 00:08:21,996
have a much more customized and


267
00:08:21,996 --> 00:08:23,706
interactive interface for the


268
00:08:23,706 --> 00:08:25,596
notification that the user is


269
00:08:25,596 --> 00:08:25,936
seeing.


270
00:08:25,936 --> 00:08:28,836
Let's do a quick recap of


271
00:08:28,836 --> 00:08:29,846
setting up these content


272
00:08:29,846 --> 00:08:30,436
extensions.


273
00:08:31,336 --> 00:08:32,686
Xcode gives you a standard


274
00:08:32,686 --> 00:08:34,566
template to add a target for the


275
00:08:34,635 --> 00:08:35,746
content extensions to your


276
00:08:35,746 --> 00:08:39,456
applications and once you set


277
00:08:39,456 --> 00:08:40,986
that up, we create a default


278
00:08:40,986 --> 00:08:42,306
class for the notification view


279
00:08:42,306 --> 00:08:44,476
controller, which implements the


280
00:08:44,476 --> 00:08:46,296
UNNotificationContentExtension


281
00:08:46,296 --> 00:08:46,716
protocol.


282
00:08:47,606 --> 00:08:49,026
Here, the did receive


283
00:08:49,026 --> 00:08:51,186
notification method is important


284
00:08:51,186 --> 00:08:52,516
because this is your entry point


285
00:08:52,516 --> 00:08:53,576
for setting up the view


286
00:08:53,576 --> 00:08:55,116
associated with the content


287
00:08:55,116 --> 00:08:57,096
extension, and you can use the


288
00:08:57,096 --> 00:08:59,276
notification object past here to


289
00:08:59,276 --> 00:09:01,006
get all the information around


290
00:09:01,006 --> 00:09:02,586
that notification to set up your


291
00:09:02,586 --> 00:09:03,126
custom view.


292
00:09:05,436 --> 00:09:07,776
The info.plist file associated


293
00:09:07,776 --> 00:09:08,856
with your content extension


294
00:09:08,996 --> 00:09:10,076
gives you more options.


295
00:09:11,226 --> 00:09:12,876
The important thing here is the


296
00:09:12,876 --> 00:09:14,026
category identifier.


297
00:09:14,466 --> 00:09:16,056
Now, this identifier needs to


298
00:09:16,056 --> 00:09:17,246
match the same category


299
00:09:17,246 --> 00:09:18,846
identifier you're setting on


300
00:09:18,846 --> 00:09:20,066
your notification requests


301
00:09:20,476 --> 00:09:21,546
because that's how the system


302
00:09:21,546 --> 00:09:23,076
knows which content extension to


303
00:09:23,076 --> 00:09:24,566
launch with which notification.


304
00:09:26,236 --> 00:09:28,546
Along with this, you can do some


305
00:09:28,546 --> 00:09:30,516
quick configurations of your


306
00:09:30,516 --> 00:09:31,756
content extension such as


307
00:09:31,756 --> 00:09:33,436
setting the initial content size


308
00:09:33,436 --> 00:09:34,936
ratio, hiding the default


309
00:09:34,936 --> 00:09:36,706
content, as well as overriding


310
00:09:36,836 --> 00:09:38,136
the title of this content


311
00:09:38,136 --> 00:09:38,576
extension.


312
00:09:39,796 --> 00:09:41,896
Now, the primary way in which


313
00:09:41,896 --> 00:09:43,526
your users interact with these


314
00:09:43,526 --> 00:09:45,136
content extensions is through


315
00:09:45,136 --> 00:09:47,086
notification actions, and these


316
00:09:47,086 --> 00:09:48,786
actions are presented right


317
00:09:48,786 --> 00:09:50,366
below the content of the content


318
00:09:50,366 --> 00:09:50,836
extension.


319
00:09:52,136 --> 00:09:53,786
Let's summarize how we can set


320
00:09:53,786 --> 00:09:54,716
up these actions as well.


321
00:09:56,126 --> 00:09:57,866
So doing so is fairly trivial in


322
00:09:57,866 --> 00:09:57,976
code.


323
00:09:58,506 --> 00:10:00,216
For example, here, we have two


324
00:10:00,216 --> 00:10:01,566
actions here for like and


325
00:10:01,566 --> 00:10:03,706
comment, and we create a simple


326
00:10:03,706 --> 00:10:05,336
UNNotificationAction for like


327
00:10:06,746 --> 00:10:08,376
and a text input action for


328
00:10:08,376 --> 00:10:08,966
commenting.


329
00:10:11,596 --> 00:10:12,836
And once we've created these


330
00:10:12,836 --> 00:10:14,236
actions, we create a new


331
00:10:14,236 --> 00:10:16,186
category giving it the same


332
00:10:16,186 --> 00:10:17,616
identifier as the content


333
00:10:17,616 --> 00:10:19,186
extension where we want these


334
00:10:19,186 --> 00:10:20,256
actions to be presented.


335
00:10:20,256 --> 00:10:23,216
And then, we pass it, the two


336
00:10:23,216 --> 00:10:27,656
new actions that we created.


337
00:10:27,656 --> 00:10:29,476
Once we've set up this category,


338
00:10:29,476 --> 00:10:30,406
then we call


339
00:10:30,406 --> 00:10:32,576
setNotificationCategories on the


340
00:10:32,576 --> 00:10:34,436
UNNotificationCenter object


341
00:10:34,436 --> 00:10:35,876
associated with our class,


342
00:10:36,176 --> 00:10:37,596
giving it the new category that


343
00:10:37,596 --> 00:10:38,766
we created.


344
00:10:40,856 --> 00:10:43,276
So by simply doing so, the next


345
00:10:43,276 --> 00:10:44,266
time when the user goes to your


346
00:10:44,266 --> 00:10:46,226
content extension we can see


347
00:10:46,226 --> 00:10:47,486
that these actions are now


348
00:10:47,486 --> 00:10:49,066
available for them to interact


349
00:10:49,066 --> 00:10:50,526
with your notification content.


350
00:10:51,636 --> 00:10:53,216
Now let's take a look at how we


351
00:10:53,216 --> 00:10:54,856
can handle the responses from


352
00:10:54,856 --> 00:10:55,516
these actions.


353
00:10:55,996 --> 00:10:57,306
There are two ways to do that.


354
00:10:58,636 --> 00:11:00,116
Firstly, you can handle this


355
00:11:00,116 --> 00:11:02,206
response in the AppDelegate that


356
00:11:02,206 --> 00:11:03,366
is associated with your


357
00:11:03,366 --> 00:11:05,386
application that implements the


358
00:11:05,386 --> 00:11:07,036
UNUserNotificationCenter


359
00:11:07,036 --> 00:11:07,836
Delegate protocol.


360
00:11:08,626 --> 00:11:09,716
Here, the function


361
00:11:09,716 --> 00:11:11,206
UserNotificationCenter did


362
00:11:11,206 --> 00:11:12,906
receive response, includes the


363
00:11:12,906 --> 00:11:15,496
response object which includes


364
00:11:15,496 --> 00:11:17,176
information about the request,


365
00:11:17,516 --> 00:11:18,716
the notification request from


366
00:11:18,716 --> 00:11:20,046
which the user took this action.


367
00:11:21,346 --> 00:11:22,916
However, the content extension


368
00:11:23,176 --> 00:11:24,826
also allows you to intercept


369
00:11:24,946 --> 00:11:26,946
this action response so that you


370
00:11:26,946 --> 00:11:28,906
can update your view and make a


371
00:11:28,906 --> 00:11:30,026
much more interactive and


372
00:11:30,026 --> 00:11:31,906
dynamic experience for users for


373
00:11:31,906 --> 00:11:32,806
the content extension.


374
00:11:33,586 --> 00:11:35,986
So for our sample here, we enter


375
00:11:35,986 --> 00:11:37,506
the did receive response method


376
00:11:38,366 --> 00:11:39,416
and checked the action


377
00:11:39,416 --> 00:11:41,056
identifier for the like action.


378
00:11:42,006 --> 00:11:44,196
And then we update our UI with


379
00:11:44,306 --> 00:11:45,956
the new label as well as update


380
00:11:45,956 --> 00:11:46,886
our application state.


381
00:11:48,476 --> 00:11:50,146
Finally calling the completion


382
00:11:50,146 --> 00:11:51,376
block we do not dismiss.


383
00:11:51,956 --> 00:11:53,266
If you do want to dismiss your


384
00:11:53,266 --> 00:11:54,476
content extension view here,


385
00:11:54,696 --> 00:11:56,486
then you can simply change the


386
00:11:56,486 --> 00:11:57,646
parameter you're passing to the


387
00:11:57,646 --> 00:12:00,796
completion block to dismiss or


388
00:12:00,796 --> 00:12:02,586
dismiss and forward, where we


389
00:12:02,586 --> 00:12:03,896
will forward this response to


390
00:12:03,896 --> 00:12:05,176
your AppDelegate function as


391
00:12:05,176 --> 00:12:05,346
well.


392
00:12:06,406 --> 00:12:07,676
All right, so now that we set


393
00:12:07,676 --> 00:12:09,396
this up, we can see that when


394
00:12:09,396 --> 00:12:10,776
the user takes the like action,


395
00:12:11,136 --> 00:12:13,206
the content extension content


396
00:12:13,206 --> 00:12:14,276
gets updated right there and


397
00:12:14,276 --> 00:12:14,446
then.


398
00:12:14,966 --> 00:12:16,516
So it's a much more interactive


399
00:12:16,516 --> 00:12:17,946
experience for your user and


400
00:12:17,946 --> 00:12:18,846
they're getting real-time


401
00:12:18,846 --> 00:12:19,886
feedback.


402
00:12:21,116 --> 00:12:22,566
However, if you look at the


403
00:12:22,626 --> 00:12:23,966
current state of the content


404
00:12:23,966 --> 00:12:26,576
extension, we see that there is


405
00:12:26,576 --> 00:12:28,106
some redundant information.


406
00:12:28,996 --> 00:12:30,526
The user has already taken the


407
00:12:30,526 --> 00:12:32,136
like action, so having the


408
00:12:32,136 --> 00:12:33,506
action there doesn't really


409
00:12:33,506 --> 00:12:34,416
serve a purpose anymore.


410
00:12:36,236 --> 00:12:38,206
Now notification actions, in


411
00:12:38,206 --> 00:12:39,416
general, have certain


412
00:12:39,416 --> 00:12:40,176
limitations.


413
00:12:41,606 --> 00:12:43,506
They are not very dynamic and


414
00:12:43,606 --> 00:12:45,316
can't be updated based on the


415
00:12:45,316 --> 00:12:46,646
context of your content


416
00:12:46,646 --> 00:12:47,226
extensions.


417
00:12:48,696 --> 00:12:51,046
Also, these tend to be tied to


418
00:12:51,046 --> 00:12:52,846
the notification categories that


419
00:12:52,846 --> 00:12:54,336
you have to define at the time


420
00:12:54,586 --> 00:12:55,726
of your application setup.


421
00:12:56,946 --> 00:12:58,526
So we wanted to address these


422
00:12:58,526 --> 00:13:00,396
issues and we have introduced a


423
00:13:00,396 --> 00:13:02,326
new API around notification


424
00:13:02,326 --> 00:13:04,206
actions, where now we're


425
00:13:04,206 --> 00:13:05,496
exposing these notification


426
00:13:05,496 --> 00:13:06,666
actions as part of the


427
00:13:06,666 --> 00:13:08,736
NSExtensionContext tied to your


428
00:13:08,736 --> 00:13:09,596
content extension.


429
00:13:10,686 --> 00:13:12,356
What this API allows you to do


430
00:13:12,576 --> 00:13:14,146
is access the currently


431
00:13:14,146 --> 00:13:15,626
presented notification actions


432
00:13:15,626 --> 00:13:17,626
to the user as well as replace


433
00:13:17,626 --> 00:13:19,526
these actions by setting a brand


434
00:13:19,526 --> 00:13:20,766
new array of notification


435
00:13:20,766 --> 00:13:22,786
actions for your content


436
00:13:25,236 --> 00:13:25,556
extension.


437
00:13:25,556 --> 00:13:27,016
So going back to our sample,


438
00:13:27,076 --> 00:13:28,826
what if after the user took the


439
00:13:28,826 --> 00:13:30,476
like action we wanted to replace


440
00:13:30,476 --> 00:13:32,546
it say with the unlike action so


441
00:13:32,546 --> 00:13:33,896
that they can do the reverse of


442
00:13:33,896 --> 00:13:36,776
the action they just took?


443
00:13:36,956 --> 00:13:39,226
So using this new API, let's


444
00:13:39,226 --> 00:13:40,356
take a look of how we can set


445
00:13:40,356 --> 00:13:41,286
this up.


446
00:13:41,376 --> 00:13:42,816
So we go back to our did receive


447
00:13:42,816 --> 00:13:44,206
response method and again


448
00:13:44,626 --> 00:13:46,296
identify the like action and


449
00:13:46,296 --> 00:13:47,716
update our application state.


450
00:13:48,916 --> 00:13:51,216
This time, we also create a new


451
00:13:51,216 --> 00:13:53,446
action for unlike, giving it a


452
00:13:53,446 --> 00:13:55,146
unique identifier as well as a


453
00:13:55,146 --> 00:13:55,476
title.


454
00:13:56,056 --> 00:13:59,816
We can also take a look at the


455
00:13:59,816 --> 00:14:01,436
currently presented actions so


456
00:14:01,436 --> 00:14:02,956
that we can extract the comment


457
00:14:02,956 --> 00:14:04,606
action from there without having


458
00:14:04,606 --> 00:14:06,056
to create it again.


459
00:14:07,276 --> 00:14:09,276
Then we create a new array of


460
00:14:09,276 --> 00:14:10,326
these new actions that we've


461
00:14:10,326 --> 00:14:13,526
created and simply set that on


462
00:14:13,606 --> 00:14:14,626
the notification actions


463
00:14:14,626 --> 00:14:14,936
variable.


464
00:14:17,456 --> 00:14:19,536
So once we've done this and the


465
00:14:19,536 --> 00:14:21,656
user takes the like action, then


466
00:14:21,656 --> 00:14:23,666
the UI will automatically update


467
00:14:23,786 --> 00:14:26,236
to show them the new action, and


468
00:14:26,236 --> 00:14:27,416
then the user can then toggle


469
00:14:27,416 --> 00:14:28,356
between the two actions,


470
00:14:28,566 --> 00:14:29,796
depending upon how you handle


471
00:14:29,796 --> 00:14:30,956
that state in your content


472
00:14:30,956 --> 00:14:31,486
extensions.


473
00:14:32,596 --> 00:14:34,726
Now, this API can be used in


474
00:14:34,726 --> 00:14:36,026
multiple other ways as well.


475
00:14:36,516 --> 00:14:38,696
For example, now you can set


476
00:14:38,696 --> 00:14:40,446
your actions at the time you're


477
00:14:40,446 --> 00:14:41,486
setting up your content


478
00:14:41,486 --> 00:14:43,116
extension view in the did


479
00:14:43,116 --> 00:14:44,306
receive notification method.


480
00:14:45,036 --> 00:14:46,306
What this means is your


481
00:14:46,306 --> 00:14:47,916
notification requests are no


482
00:14:47,916 --> 00:14:49,826
longer tied to the category to


483
00:14:49,826 --> 00:14:51,386
define the actions that you want


484
00:14:51,386 --> 00:14:52,306
to present around these


485
00:14:52,306 --> 00:14:53,016
notifications.


486
00:14:53,016 --> 00:14:57,126
You can also now present a


487
00:14:57,126 --> 00:14:58,956
secondary set of actions by


488
00:14:58,956 --> 00:15:00,026
replacing the currently


489
00:15:00,026 --> 00:15:00,846
presented actions.


490
00:15:01,236 --> 00:15:03,306
For example, if the leading


491
00:15:03,306 --> 00:15:05,326
action was rate, then you can


492
00:15:05,326 --> 00:15:07,046
provide a secondary list of the


493
00:15:07,046 --> 00:15:08,406
different types of ratings that


494
00:15:08,406 --> 00:15:10,366
you want your user to take.


495
00:15:12,156 --> 00:15:14,556
And you can also remove all


496
00:15:14,556 --> 00:15:16,176
these notification actions if


497
00:15:16,176 --> 00:15:17,746
you feel it does not make sense


498
00:15:17,746 --> 00:15:19,316
anymore for your content


499
00:15:19,316 --> 00:15:20,286
extension to present these


500
00:15:20,286 --> 00:15:20,716
actions.


501
00:15:21,106 --> 00:15:25,426
So that's the new API around


502
00:15:25,456 --> 00:15:26,476
notification actions.


503
00:15:26,796 --> 00:15:28,456
And we feel this will really


504
00:15:28,456 --> 00:15:30,706
help you enhance the experience


505
00:15:30,706 --> 00:15:32,316
that your users have around your


506
00:15:32,316 --> 00:15:33,986
content extensions with the


507
00:15:33,986 --> 00:15:35,196
different actions now you can


508
00:15:35,196 --> 00:15:39,036
present to them.


509
00:15:39,216 --> 00:15:40,576
Let's move on and talk about


510
00:15:40,576 --> 00:15:41,806
user interaction with these


511
00:15:41,806 --> 00:15:42,676
content extensions.


512
00:15:43,836 --> 00:15:45,796
Now notification actions were


513
00:15:45,796 --> 00:15:47,726
important up till this point


514
00:15:48,036 --> 00:15:51,146
because till iOS 11 we did not


515
00:15:51,146 --> 00:15:53,166
allow user interaction touches


516
00:15:53,256 --> 00:15:54,456
with your content extension


517
00:15:56,086 --> 00:15:56,196
view.


518
00:15:56,416 --> 00:15:57,486
Now we received a lot of


519
00:15:57,486 --> 00:15:58,536
feedback around this.


520
00:15:58,906 --> 00:16:00,706
And I'm happy to announce that


521
00:16:00,836 --> 00:16:01,846
we're taking away this


522
00:16:01,846 --> 00:16:03,126
restriction with iOS 12.


523
00:16:04,516 --> 00:16:07,546
[ Applause ]


524
00:16:08,046 --> 00:16:09,636
So now your content extensions


525
00:16:09,636 --> 00:16:11,826
have the option of opting in to


526
00:16:11,826 --> 00:16:13,456
receiving user interaction


527
00:16:13,456 --> 00:16:16,286
[inaudible] touches, and setting


528
00:16:16,286 --> 00:16:17,786
this up, it's fairly trivial.


529
00:16:18,046 --> 00:16:20,096
All you have to do is add a new


530
00:16:20,096 --> 00:16:22,446
key value option to your


531
00:16:22,446 --> 00:16:23,326
info.plist file.


532
00:16:23,766 --> 00:16:26,556
And the key that we've added is


533
00:16:26,556 --> 00:16:29,446
the UNNotificationExtensionUser


534
00:16:29,446 --> 00:16:30,386
InteractionEnabled.


535
00:16:32,586 --> 00:16:34,436
So going back to our sample,


536
00:16:34,696 --> 00:16:36,576
what if we want to remove the


537
00:16:36,576 --> 00:16:38,416
like action from a notification


538
00:16:38,416 --> 00:16:40,556
action and make it a UI


539
00:16:40,556 --> 00:16:42,626
interaction touch that's part of


540
00:16:42,626 --> 00:16:43,326
the view itself?


541
00:16:44,316 --> 00:16:45,506
So once we've configured our


542
00:16:45,506 --> 00:16:48,376
info.plist file, we can go back


543
00:16:48,376 --> 00:16:49,776
to our content extension view


544
00:16:50,126 --> 00:16:51,976
and create our own custom button


545
00:16:51,976 --> 00:16:53,366
to handle the like gesture.


546
00:16:54,716 --> 00:16:56,396
We add a target for our own


547
00:16:56,396 --> 00:16:59,806
private method and inside that


548
00:16:59,806 --> 00:17:02,016
function, we update the UI as


549
00:17:02,016 --> 00:17:03,486
well as update our application


550
00:17:03,486 --> 00:17:03,806
state.


551
00:17:05,316 --> 00:17:06,886
So here, it's important that


552
00:17:06,886 --> 00:17:07,986
since you're implementing your


553
00:17:07,986 --> 00:17:09,915
own user interactions that you


554
00:17:09,915 --> 00:17:11,886
are responsible for handling all


555
00:17:11,886 --> 00:17:13,626
these actions, responses, and


556
00:17:13,626 --> 00:17:14,846
callbacks from the users


557
00:17:14,846 --> 00:17:15,316
yourself.


558
00:17:17,976 --> 00:17:20,546
So once we've set this up, now


559
00:17:20,546 --> 00:17:21,556
when the user goes to your


560
00:17:21,556 --> 00:17:23,215
content extension we see the


561
00:17:23,215 --> 00:17:24,556
Like button, part of the UI


562
00:17:24,556 --> 00:17:26,705
itself, and the user can simply


563
00:17:26,705 --> 00:17:28,175
interact with that button right


564
00:17:28,175 --> 00:17:28,666
there and then.


565
00:17:33,126 --> 00:17:35,536
So that's the new functionality


566
00:17:35,536 --> 00:17:36,536
that we've added around content


567
00:17:36,536 --> 00:17:37,096
extensions.


568
00:17:37,396 --> 00:17:38,746
And coupled with notification


569
00:17:38,746 --> 00:17:40,076
actions, along with user


570
00:17:40,076 --> 00:17:41,686
interaction touches, you now


571
00:17:41,686 --> 00:17:43,846
have a much richer set of tools


572
00:17:44,106 --> 00:17:44,966
for creating much more


573
00:17:44,966 --> 00:17:46,646
interactive and dynamic content


574
00:17:46,646 --> 00:17:48,336
extension experiences for your


575
00:17:48,336 --> 00:17:49,986
applications notifications


576
00:17:49,986 --> 00:17:50,416
users.


577
00:17:52,516 --> 00:17:54,346
Now let's talk about launching


578
00:17:54,346 --> 00:17:55,636
your application from the


579
00:17:55,636 --> 00:17:56,906
notification content extension.


580
00:17:58,536 --> 00:18:01,146
So today the user can launch


581
00:18:01,146 --> 00:18:03,216
your application if touches were


582
00:18:03,216 --> 00:18:04,706
not allowed by simply tapping


583
00:18:04,916 --> 00:18:07,126
the content extension view.


584
00:18:08,036 --> 00:18:09,786
They could also do so by tapping


585
00:18:10,046 --> 00:18:12,116
your application icon in the top


586
00:18:12,596 --> 00:18:14,126
left corner.


587
00:18:14,226 --> 00:18:15,966
Or you could create a foreground


588
00:18:15,966 --> 00:18:17,786
action, which then would in turn


589
00:18:17,786 --> 00:18:19,266
launch the application.


590
00:18:20,936 --> 00:18:22,926
But what if you wanted to do


591
00:18:22,926 --> 00:18:24,106
this from your own custom


592
00:18:24,106 --> 00:18:24,646
control?


593
00:18:25,986 --> 00:18:27,056
What if you wanted to launch the


594
00:18:27,056 --> 00:18:28,306
application programmatically?


595
00:18:29,206 --> 00:18:30,746
To enable this, there is a new


596
00:18:30,746 --> 00:18:33,136
API on the NSExtensionContext


597
00:18:33,136 --> 00:18:34,656
called performNotification


598
00:18:34,656 --> 00:18:36,476
DefaultAction, which would allow


599
00:18:36,476 --> 00:18:40,936
you to do this now.


600
00:18:40,936 --> 00:18:42,026
Now, what does the default


601
00:18:42,026 --> 00:18:42,546
action mean?


602
00:18:43,156 --> 00:18:45,006
So, as we said, it launches the


603
00:18:45,006 --> 00:18:47,046
application, but at the same


604
00:18:47,046 --> 00:18:48,036
time, it calls the


605
00:18:48,036 --> 00:18:49,776
UserNotificationCenter did


606
00:18:49,776 --> 00:18:51,826
receive response method in your


607
00:18:51,826 --> 00:18:52,656
application delegate.


608
00:18:54,066 --> 00:18:55,416
Now the UNNotificationResponse


609
00:18:55,416 --> 00:18:56,876
object contains the information


610
00:18:56,876 --> 00:18:58,316
of the notification from which


611
00:18:58,316 --> 00:19:00,536
the user came, so you can update


612
00:19:00,536 --> 00:19:02,476
your application state based on


613
00:19:02,686 --> 00:19:03,416
the notification.


614
00:19:04,696 --> 00:19:06,256
And the identifier that's passed


615
00:19:06,256 --> 00:19:07,336
here is the


616
00:19:07,336 --> 00:19:08,766
UNNotificationDefault


617
00:19:08,766 --> 00:19:09,746
ActionIdentifier.


618
00:19:10,246 --> 00:19:12,846
So going back to our sample,


619
00:19:12,956 --> 00:19:14,316
let's see how we can set this


620
00:19:14,316 --> 00:19:15,806
custom control up.


621
00:19:17,096 --> 00:19:19,226
Now again, we create our own UI


622
00:19:19,226 --> 00:19:21,626
button for the all comments and


623
00:19:22,656 --> 00:19:25,736
then tie it up with our own


624
00:19:25,736 --> 00:19:26,386
private function.


625
00:19:27,496 --> 00:19:28,796
And in that function, we're


626
00:19:28,796 --> 00:19:29,546
simply calling


627
00:19:29,546 --> 00:19:30,456
PerformNotification


628
00:19:30,456 --> 00:19:31,036
DefaultAction.


629
00:19:31,826 --> 00:19:33,576
So by simply doing that, you get


630
00:19:33,576 --> 00:19:35,186
this functionality to call this


631
00:19:35,186 --> 00:19:36,446
method programmatically from


632
00:19:36,446 --> 00:19:37,586
anywhere in your content


633
00:19:37,586 --> 00:19:40,526
extension code.


634
00:19:40,726 --> 00:19:42,136
So that was launching the


635
00:19:42,136 --> 00:19:42,676
application.


636
00:19:43,476 --> 00:19:44,556
What about dismissing the


637
00:19:44,556 --> 00:19:48,336
content extension view?


638
00:19:48,546 --> 00:19:49,926
Again, let's take a look at how


639
00:19:49,926 --> 00:19:51,046
the user can do that today.


640
00:19:51,636 --> 00:19:52,866
They can do that by tapping the


641
00:19:52,866 --> 00:19:54,566
Dismiss Button in the top right


642
00:19:55,896 --> 00:19:57,846
corner, or you can create your


643
00:19:57,846 --> 00:19:59,346
own custom notification action,


644
00:19:59,676 --> 00:20:01,126
which would in turn dismiss the


645
00:20:01,126 --> 00:20:02,086
content extension view.


646
00:20:02,736 --> 00:20:04,056
Which you can set up, as we saw


647
00:20:04,056 --> 00:20:05,706
before, by passing dismiss to


648
00:20:05,706 --> 00:20:06,456
the completion block.


649
00:20:08,456 --> 00:20:10,476
But again, what if we want to


650
00:20:10,476 --> 00:20:12,326
dismiss the view through our own


651
00:20:12,326 --> 00:20:14,006
custom buttons, and we want to


652
00:20:14,006 --> 00:20:15,006
do this programmatically?


653
00:20:15,436 --> 00:20:16,986
Say that when the user taps the


654
00:20:16,986 --> 00:20:18,146
Like button, then the view


655
00:20:18,146 --> 00:20:19,646
dismisses because we feel the


656
00:20:19,646 --> 00:20:21,276
user's done interacting with the


657
00:20:21,276 --> 00:20:22,046
content extension.


658
00:20:23,436 --> 00:20:25,266
To enable this as well, there's


659
00:20:25,266 --> 00:20:26,616
a new API called


660
00:20:26,616 --> 00:20:27,826
dismissNotificationContent


661
00:20:27,826 --> 00:20:29,306
Extension that's on the


662
00:20:29,306 --> 00:20:30,446
NSExtensionContext.


663
00:20:32,896 --> 00:20:35,046
We go back to how we set up our


664
00:20:35,046 --> 00:20:36,556
Like button, and now this time,


665
00:20:36,986 --> 00:20:39,836
we also call the new function


666
00:20:39,966 --> 00:20:41,376
that we added for dismissing the


667
00:20:41,376 --> 00:20:42,866
content extension view.


668
00:20:44,676 --> 00:20:46,816
And once we set this up, now


669
00:20:46,816 --> 00:20:47,816
when the user takes the like


670
00:20:47,816 --> 00:20:49,526
action, the view of the content


671
00:20:49,526 --> 00:20:52,776
extension gets dismissed.


672
00:20:52,826 --> 00:20:53,986
Now one thing to note here.


673
00:20:53,986 --> 00:20:56,156
That calling this method does


674
00:20:56,156 --> 00:20:57,746
not withdraw the notification


675
00:20:57,876 --> 00:20:59,146
that was posted to the user.


676
00:20:59,836 --> 00:21:01,816
If you want to do that then use


677
00:21:01,816 --> 00:21:04,236
the existing API for removing


678
00:21:04,236 --> 00:21:05,356
delivered notifications with


679
00:21:05,356 --> 00:21:06,696
identifiers to get that


680
00:21:06,696 --> 00:21:07,916
functionality.


681
00:21:09,696 --> 00:21:11,296
All right, now let's summarize


682
00:21:11,296 --> 00:21:13,266
all the new APIs that we've


683
00:21:13,266 --> 00:21:14,486
looked at today around the


684
00:21:14,486 --> 00:21:15,926
notification content extensions.


685
00:21:18,536 --> 00:21:20,506
We started with talking about


686
00:21:20,506 --> 00:21:22,166
notification actions where now


687
00:21:22,376 --> 00:21:23,356
you can access these


688
00:21:23,356 --> 00:21:25,016
notification actions as well as


689
00:21:25,016 --> 00:21:26,686
replace them dynamically from


690
00:21:26,686 --> 00:21:27,656
anywhere in your content


691
00:21:27,656 --> 00:21:28,646
extension code.


692
00:21:28,846 --> 00:21:33,196
You can now opt in to having


693
00:21:33,196 --> 00:21:34,456
user interaction based on


694
00:21:34,456 --> 00:21:35,886
touches within your content


695
00:21:35,886 --> 00:21:36,666
extension views.


696
00:21:36,666 --> 00:21:40,436
You can programmatically launch


697
00:21:40,436 --> 00:21:42,116
the application from anywhere in


698
00:21:42,116 --> 00:21:44,926
your content extension code as


699
00:21:44,926 --> 00:21:46,196
well as dismiss the content


700
00:21:46,196 --> 00:21:48,086
extension view, depending upon


701
00:21:48,266 --> 00:21:49,936
where you feel it serves best


702
00:21:50,056 --> 00:21:51,686
your user's experience around


703
00:21:51,686 --> 00:21:52,576
the content extensions.


704
00:21:52,896 --> 00:21:56,316
So that's a varied list of APIs


705
00:21:56,316 --> 00:21:57,876
around content extensions, and


706
00:21:57,876 --> 00:21:59,436
we hope this really helps you


707
00:21:59,436 --> 00:22:01,366
enhance your user's experience


708
00:22:01,366 --> 00:22:02,476
around your content extensions


709
00:22:02,546 --> 00:22:03,806
and then you start using these


710
00:22:03,806 --> 00:22:04,096
APIs.


711
00:22:04,096 --> 00:22:06,726
So that was notification content


712
00:22:06,726 --> 00:22:07,276
extensions.


713
00:22:07,866 --> 00:22:09,836
Now, the next topic today we're


714
00:22:09,836 --> 00:22:11,316
going to look at is notification


715
00:22:11,316 --> 00:22:12,986
management, and to tell you all


716
00:22:12,986 --> 00:22:14,376
about that, let me invite my


717
00:22:14,376 --> 00:22:15,576
colleague Teja to the stage.


718
00:22:15,776 --> 00:22:15,976
Thank you.


719
00:22:16,516 --> 00:22:22,556
[ Applause ]


720
00:22:23,056 --> 00:22:23,946
>> Thank you Kritarth.


721
00:22:24,136 --> 00:22:24,946
Hi everyone.


722
00:22:25,416 --> 00:22:27,206
My name is Teja Kondapalli, and


723
00:22:27,206 --> 00:22:29,026
I'm also an engineer on the iOS


724
00:22:29,026 --> 00:22:30,146
Notifications' Team.


725
00:22:30,546 --> 00:22:31,746
And, of course, I'm here to talk


726
00:22:31,796 --> 00:22:33,216
to you about a couple of the new


727
00:22:33,216 --> 00:22:34,396
APIs that we have.


728
00:22:35,126 --> 00:22:36,546
The first of which is


729
00:22:36,916 --> 00:22:38,476
notification management.


730
00:22:39,256 --> 00:22:40,896
But before I dive into this API,


731
00:22:40,896 --> 00:22:42,916
I want to cover some of the user


732
00:22:42,916 --> 00:22:46,396
facing features to give you some


733
00:22:46,396 --> 00:22:47,776
more context and then we can


734
00:22:47,776 --> 00:22:48,756
deep dive into the API.


735
00:22:53,136 --> 00:22:54,606
As our users get more and more


736
00:22:54,776 --> 00:22:55,546
apps on their phones,


737
00:22:56,026 --> 00:22:57,856
notifications become the primary


738
00:22:57,856 --> 00:22:59,166
way that they interact with


739
00:22:59,166 --> 00:23:00,426
these apps.


740
00:23:00,536 --> 00:23:02,516
But often, they find themselves


741
00:23:02,686 --> 00:23:04,356
in a situation like this.


742
00:23:05,176 --> 00:23:07,446
With far too many notifications.


743
00:23:07,766 --> 00:23:09,026
And it becomes hard to sift


744
00:23:09,076 --> 00:23:10,846
through and find the important


745
00:23:10,846 --> 00:23:11,096
ones.


746
00:23:11,646 --> 00:23:14,756
So perhaps to make this easier,


747
00:23:14,756 --> 00:23:16,726
this user has decided that


748
00:23:17,046 --> 00:23:18,386
notifications from podcasts


749
00:23:19,076 --> 00:23:20,026
don't need to be shown on the


750
00:23:20,026 --> 00:23:20,706
locked screen.


751
00:23:21,476 --> 00:23:22,966
Right now to configure that


752
00:23:23,606 --> 00:23:24,546
they'd have to launch the


753
00:23:24,586 --> 00:23:25,896
settings app, find


754
00:23:25,896 --> 00:23:28,506
notifications, find the podcast


755
00:23:29,426 --> 00:23:30,776
app, and then they can configure


756
00:23:30,776 --> 00:23:31,316
their settings.


757
00:23:32,786 --> 00:23:33,976
We wanted to make this easier.


758
00:23:34,616 --> 00:23:37,146
So, in iOS 12, we're introducing


759
00:23:37,146 --> 00:23:39,936
a new management view where the


760
00:23:39,936 --> 00:23:41,936
users can configure their


761
00:23:41,936 --> 00:23:43,836
notification settings directly


762
00:23:43,836 --> 00:23:45,886
from the notification without


763
00:23:46,026 --> 00:23:46,836
having to launch the settings


764
00:23:46,836 --> 00:23:46,976
app.


765
00:23:51,206 --> 00:23:52,586
There's three really easy ways


766
00:23:52,626 --> 00:23:53,696
to get into this management


767
00:23:53,696 --> 00:23:53,936
view.


768
00:23:54,436 --> 00:23:55,826
The first is what we just saw.


769
00:23:56,476 --> 00:23:57,536
You simply swipe over a


770
00:23:57,536 --> 00:23:59,676
notification, tap manage, and


771
00:24:00,416 --> 00:24:02,126
the management view comes up.


772
00:24:03,776 --> 00:24:07,196
The second is if you can go into


773
00:24:07,196 --> 00:24:08,956
the rich notification, you can


774
00:24:08,956 --> 00:24:10,706
tap in the right corner, and you


775
00:24:10,706 --> 00:24:11,866
can also launch the management


776
00:24:11,866 --> 00:24:12,066
view.


777
00:24:12,596 --> 00:24:15,676
And the third is actually in the


778
00:24:15,676 --> 00:24:16,386
list itself.


779
00:24:17,146 --> 00:24:18,616
Depending on how your users are


780
00:24:18,616 --> 00:24:19,476
interacting with their


781
00:24:19,476 --> 00:24:21,006
notifications, they will


782
00:24:21,006 --> 00:24:22,566
occasionally see suggestions,


783
00:24:22,616 --> 00:24:24,446
like this one, that ask them if


784
00:24:24,446 --> 00:24:25,676
they want to keep receiving


785
00:24:25,926 --> 00:24:27,226
podcast notifications.


786
00:24:27,886 --> 00:24:29,496
And from here, as well, they can


787
00:24:29,496 --> 00:24:31,346
tap manage and bring up the


788
00:24:31,346 --> 00:24:32,086
management view.


789
00:24:32,686 --> 00:24:35,456
Let's take a closer look at the


790
00:24:35,456 --> 00:24:36,196
management view.


791
00:24:36,866 --> 00:24:38,626
And we obviously have options


792
00:24:38,626 --> 00:24:40,436
here where users can configure


793
00:24:40,436 --> 00:24:41,606
their notification settings


794
00:24:41,916 --> 00:24:43,216
directly from this view.


795
00:24:44,136 --> 00:24:45,906
But if they want to go into the


796
00:24:45,906 --> 00:24:47,976
settings app and configure in a


797
00:24:47,976 --> 00:24:50,146
more detailed manner, they have


798
00:24:50,146 --> 00:24:52,146
a quick link to the settings for


799
00:24:52,146 --> 00:24:53,356
this application, the


800
00:24:53,356 --> 00:24:55,446
notification settings.


801
00:24:56,106 --> 00:24:58,676
A And also from this view, they


802
00:24:58,676 --> 00:24:59,896
have some actions they can take


803
00:24:59,946 --> 00:25:02,256
directly, the first of which


804
00:25:02,256 --> 00:25:04,046
says deliver quietly, which is


805
00:25:04,046 --> 00:25:05,676
probably a concept that's new to


806
00:25:05,676 --> 00:25:06,276
all of you.


807
00:25:07,446 --> 00:25:08,746
Some of these management views


808
00:25:08,906 --> 00:25:10,546
will also have an option that


809
00:25:10,546 --> 00:25:12,816
says deliver prominently, so


810
00:25:12,816 --> 00:25:16,376
let's talk about what this


811
00:25:16,596 --> 00:25:16,746
means.


812
00:25:16,746 --> 00:25:18,486
In iOS, we have a lot of


813
00:25:18,486 --> 00:25:19,846
settings that users can


814
00:25:19,846 --> 00:25:21,686
configure, and this is really


815
00:25:21,686 --> 00:25:22,896
great for the power user.


816
00:25:23,296 --> 00:25:24,756
The can customize their settings


817
00:25:24,756 --> 00:25:27,326
to every detail, but for the


818
00:25:27,326 --> 00:25:29,576
regular user, we think that we


819
00:25:29,576 --> 00:25:31,046
can help them out by


820
00:25:31,046 --> 00:25:32,706
categorizing their notification


821
00:25:32,706 --> 00:25:34,516
settings into two big


822
00:25:34,516 --> 00:25:35,076
categories.


823
00:25:36,016 --> 00:25:37,436
Notifications that are delivered


824
00:25:37,566 --> 00:25:39,486
prominently and notifications


825
00:25:39,536 --> 00:25:40,796
that are delivered quietly.


826
00:25:43,056 --> 00:25:44,926
Notifications that are delivered


827
00:25:44,926 --> 00:25:46,356
prominently are what we're used


828
00:25:46,436 --> 00:25:46,676
to.


829
00:25:47,076 --> 00:25:48,016
They show up on the locked


830
00:25:48,016 --> 00:25:48,426
screen.


831
00:25:49,926 --> 00:25:50,996
They show up in notification


832
00:25:50,996 --> 00:25:51,416
center.


833
00:25:52,076 --> 00:25:53,486
They roll down as banners.


834
00:25:54,226 --> 00:25:56,376
They badge the AP icon and they


835
00:25:56,376 --> 00:25:59,296
can play a sound.


836
00:25:59,466 --> 00:26:00,806
Notifications that are delivered


837
00:26:00,806 --> 00:26:02,966
quietly only show up in


838
00:26:02,966 --> 00:26:04,556
notification center and they


839
00:26:04,556 --> 00:26:08,156
don't play a sound.


840
00:26:08,346 --> 00:26:09,876
And from the management view, in


841
00:26:09,876 --> 00:26:12,066
addition to configuring whether


842
00:26:12,066 --> 00:26:13,506
they want their notifications


843
00:26:13,886 --> 00:26:15,176
delivered prominently or


844
00:26:15,176 --> 00:26:17,666
quietly, users also have the


845
00:26:17,696 --> 00:26:19,366
option to turn off their


846
00:26:19,366 --> 00:26:20,226
notifications.


847
00:26:21,636 --> 00:26:23,806
Now, I know that you might worry


848
00:26:23,806 --> 00:26:25,146
that your users are going to


849
00:26:25,146 --> 00:26:26,406
turn off the notifications for


850
00:26:26,406 --> 00:26:29,166
your app, so we've added this


851
00:26:29,166 --> 00:26:31,526
extra confirmation sheet just in


852
00:26:31,526 --> 00:26:33,126
case they do tap turn off.


853
00:26:33,806 --> 00:26:35,476
And from here, they can also


854
00:26:35,766 --> 00:26:36,996
turn off their notifications.


855
00:26:37,426 --> 00:26:39,636
But we've also added an API to


856
00:26:39,636 --> 00:26:41,536
add a second option to this


857
00:26:41,906 --> 00:26:44,386
confirmation sheet, and podcast


858
00:26:44,386 --> 00:26:46,166
has taken advantage of this API,


859
00:26:46,706 --> 00:26:48,476
so it says configure in podcast.


860
00:26:49,556 --> 00:26:52,176
This is a link that will deep


861
00:26:52,176 --> 00:26:54,286
link within the podcast app to a


862
00:26:54,326 --> 00:26:56,776
custom settings view that allows


863
00:26:56,776 --> 00:26:59,256
the user more granular control


864
00:26:59,256 --> 00:27:01,106
about what kind of podcast


865
00:27:01,106 --> 00:27:02,696
notifications they want.


866
00:27:04,056 --> 00:27:06,096
And as your apps send more and


867
00:27:06,096 --> 00:27:07,456
more notifications and various


868
00:27:07,456 --> 00:27:09,536
type of notifications, we think


869
00:27:09,536 --> 00:27:12,276
it's really important to allow


870
00:27:12,276 --> 00:27:13,776
them this granular level of


871
00:27:13,776 --> 00:27:15,986
control over what kind of


872
00:27:15,986 --> 00:27:17,626
notifications are important to


873
00:27:17,626 --> 00:27:17,886
them.


874
00:27:21,476 --> 00:27:23,816
This link can also be accessed


875
00:27:23,966 --> 00:27:26,086
from the systems settings app


876
00:27:26,336 --> 00:27:27,886
from your apps' notification


877
00:27:27,886 --> 00:27:28,256
settings.


878
00:27:28,486 --> 00:27:30,046
And you can see for podcasts


879
00:27:30,376 --> 00:27:31,456
it's right at the bottom.


880
00:27:31,856 --> 00:27:33,926
It says podcast notifications


881
00:27:33,966 --> 00:27:34,296
settings.


882
00:27:34,796 --> 00:27:37,356
Let's see how we do this in


883
00:27:37,356 --> 00:27:37,606
code.


884
00:27:38,196 --> 00:27:41,256
In the class that conforms to


885
00:27:41,436 --> 00:27:43,256
UNUserNotificationCenter


886
00:27:43,356 --> 00:27:45,526
Delegate, we have a new delegate


887
00:27:45,526 --> 00:27:45,906
method.


888
00:27:46,566 --> 00:27:48,986
Open settings for notification,


889
00:27:49,816 --> 00:27:51,316
and as long as you implement


890
00:27:51,316 --> 00:27:53,296
this delegate method, those


891
00:27:53,296 --> 00:27:54,866
links that we talked about from


892
00:27:54,866 --> 00:27:56,206
the management view, or from the


893
00:27:56,206 --> 00:27:57,926
settings app, will automatically


894
00:27:57,926 --> 00:28:00,056
be populated by the system for


895
00:28:00,056 --> 00:28:00,266
you.


896
00:28:00,846 --> 00:28:03,206
So when the user taps on any of


897
00:28:03,206 --> 00:28:04,456
these links, this delegate


898
00:28:04,456 --> 00:28:06,816
method will be called.


899
00:28:06,986 --> 00:28:09,426
And it's really important when


900
00:28:09,426 --> 00:28:10,696
this delegate method is called


901
00:28:10,696 --> 00:28:12,096
that you immediately take your


902
00:28:12,096 --> 00:28:13,856
users into the view where they


903
00:28:13,856 --> 00:28:15,906
can configure their notification


904
00:28:15,906 --> 00:28:19,106
settings within your app.


905
00:28:19,366 --> 00:28:22,246
And if you notice, we have


906
00:28:22,246 --> 00:28:23,626
[inaudible] parameter to this


907
00:28:23,626 --> 00:28:25,766
method, and it is notification.


908
00:28:26,236 --> 00:28:27,726
So depending on where the link


909
00:28:27,726 --> 00:28:29,126
was tapped from, if it was


910
00:28:29,126 --> 00:28:29,866
tapped from one of the


911
00:28:29,866 --> 00:28:31,686
management views, it will have


912
00:28:31,686 --> 00:28:33,306
the value of the notification


913
00:28:33,566 --> 00:28:34,776
that that management view came


914
00:28:34,776 --> 00:28:35,006
from.


915
00:28:35,996 --> 00:28:37,496
If it was tapped from the


916
00:28:37,496 --> 00:28:39,176
settings app, the value of


917
00:28:39,176 --> 00:28:41,546
notification will be nil, and


918
00:28:41,546 --> 00:28:43,366
you can use this information to


919
00:28:43,366 --> 00:28:44,466
show the appropriate


920
00:28:44,466 --> 00:28:46,366
notification settings when this


921
00:28:46,366 --> 00:28:47,756
delegate method is called.


922
00:28:48,286 --> 00:28:52,066
So that's what we have for


923
00:28:52,066 --> 00:28:53,316
notification management.


924
00:28:53,726 --> 00:28:56,266
It's a new way for your users to


925
00:28:56,616 --> 00:28:57,726
configure whether they want


926
00:28:57,726 --> 00:28:58,986
their notifications delivered


927
00:28:59,306 --> 00:29:02,246
prominently or quietly, or turn


928
00:29:02,246 --> 00:29:04,346
them off, or even configure them


929
00:29:04,346 --> 00:29:07,866
at a granular level within your


930
00:29:09,226 --> 00:29:09,293
app.


931
00:29:09,616 --> 00:29:12,106
And to encourage your users to


932
00:29:12,246 --> 00:29:13,496
keep getting your notifications


933
00:29:13,496 --> 00:29:15,616
delivered, we think it's really


934
00:29:15,616 --> 00:29:16,976
important that you make the


935
00:29:16,976 --> 00:29:18,576
content in the notifications


936
00:29:18,956 --> 00:29:19,406
relevant.


937
00:29:20,596 --> 00:29:23,276
We also encourage you to use


938
00:29:23,426 --> 00:29:24,826
thread identifiers to group the


939
00:29:24,826 --> 00:29:26,276
notifications when you think


940
00:29:26,276 --> 00:29:26,986
it's appropriate.


941
00:29:28,036 --> 00:29:29,046
This will help the users


942
00:29:29,156 --> 00:29:31,706
organize their lists better and


943
00:29:32,136 --> 00:29:33,556
will make sure that they're not


944
00:29:33,556 --> 00:29:35,186
overwhelmed by the notifications


945
00:29:35,276 --> 00:29:36,526
from your app.


946
00:29:37,716 --> 00:29:40,406
We also think that as your apps


947
00:29:40,486 --> 00:29:41,786
send various types of


948
00:29:41,786 --> 00:29:43,496
notifications, it's really


949
00:29:43,496 --> 00:29:44,996
important to provide that custom


950
00:29:44,996 --> 00:29:47,706
settings view within that app so


951
00:29:47,706 --> 00:29:48,986
that users have more granular


952
00:29:48,986 --> 00:29:50,566
control about what kind of


953
00:29:50,566 --> 00:29:52,336
notifications are important to


954
00:29:52,336 --> 00:29:52,686
them.


955
00:29:54,046 --> 00:29:55,036
That's what we have for


956
00:29:55,036 --> 00:29:56,216
notification management.


957
00:29:57,046 --> 00:29:59,226
And the next big feature I want


958
00:29:59,226 --> 00:30:00,496
to talk to you about is


959
00:30:00,496 --> 00:30:01,986
provisional authorization.


960
00:30:02,566 --> 00:30:06,976
Right now, when a user installs


961
00:30:06,976 --> 00:30:08,736
your app, before they start


962
00:30:08,736 --> 00:30:10,606
receiving notifications, at some


963
00:30:10,656 --> 00:30:12,396
point they'll have to respond to


964
00:30:12,396 --> 00:30:13,586
a prompt that looks like this,


965
00:30:14,856 --> 00:30:15,686
which is asking them if they


966
00:30:15,686 --> 00:30:16,906
want these notifications.


967
00:30:17,606 --> 00:30:19,366
And the biggest problem with


968
00:30:19,366 --> 00:30:21,596
this is, at this point, the user


969
00:30:22,146 --> 00:30:23,326
doesn't know what kind of


970
00:30:23,526 --> 00:30:25,126
notifications this app is going


971
00:30:25,186 --> 00:30:26,676
to send, so they don't know if


972
00:30:26,676 --> 00:30:27,876
they want them or not.


973
00:30:29,026 --> 00:30:31,906
So, in iOS 12, we're introducing


974
00:30:32,106 --> 00:30:34,136
provisional authorization, and


975
00:30:34,136 --> 00:30:36,356
this is an automatic trial of


976
00:30:36,356 --> 00:30:38,346
the notifications from your app.


977
00:30:39,376 --> 00:30:41,126
This will help your users make a


978
00:30:41,126 --> 00:30:43,046
more informed decision on


979
00:30:43,046 --> 00:30:44,156
whether they want these


980
00:30:44,156 --> 00:30:45,336
notifications or not.


981
00:30:46,046 --> 00:30:48,366
So you can opt into this, and if


982
00:30:48,366 --> 00:30:51,256
you do, your users will not get


983
00:30:51,256 --> 00:30:52,586
that authorization prompt that


984
00:30:52,586 --> 00:30:53,196
we just saw.


985
00:30:53,816 --> 00:30:55,506
Instead, the notifications from


986
00:30:55,506 --> 00:30:56,686
your app will automatically


987
00:30:56,686 --> 00:30:57,896
start getting delivered.


988
00:30:58,546 --> 00:31:00,946
But these notifications will be


989
00:31:00,946 --> 00:31:04,076
delivered quietly, and if we


990
00:31:04,076 --> 00:31:06,086
recall, notifications that are


991
00:31:06,086 --> 00:31:08,416
delivered quietly only show up


992
00:31:08,466 --> 00:31:10,496
in notifications center, and


993
00:31:10,606 --> 00:31:11,586
they don't play a sound.


994
00:31:15,656 --> 00:31:17,796
Notifications that are delivered


995
00:31:17,976 --> 00:31:19,546
with provisional authorization


996
00:31:19,916 --> 00:31:22,156
will have a prompt like this on


997
00:31:22,156 --> 00:31:23,246
the notification itself.


998
00:31:23,846 --> 00:31:26,976
And this will help the users


999
00:31:27,966 --> 00:31:29,666
decide after having received a


1000
00:31:29,666 --> 00:31:31,596
few notifications whether they


1001
00:31:31,596 --> 00:31:32,736
want to keep getting these


1002
00:31:32,736 --> 00:31:35,236
notifications or whether they


1003
00:31:35,236 --> 00:31:39,746
want to turn them off.


1004
00:31:40,926 --> 00:31:42,226
And this turn off confirmation


1005
00:31:42,226 --> 00:31:44,056
sheet will also have the custom


1006
00:31:44,056 --> 00:31:46,076
settings link if you have


1007
00:31:46,076 --> 00:31:47,346
provided it.


1008
00:31:49,176 --> 00:31:50,956
Let's see how you can do this in


1009
00:31:50,956 --> 00:31:51,246
code.


1010
00:31:52,426 --> 00:31:53,826
In the location where you


1011
00:31:53,826 --> 00:31:55,746
regularly request authorization,


1012
00:31:56,596 --> 00:31:58,506
in addition to whatever options


1013
00:31:58,506 --> 00:32:00,226
you might be requesting, you can


1014
00:32:00,356 --> 00:32:04,366
add a dot qualifying option


1015
00:32:04,366 --> 00:32:05,436
called .provisional.


1016
00:32:06,176 --> 00:32:09,806
And if you include this, you


1017
00:32:10,036 --> 00:32:11,546
will automatically start


1018
00:32:11,546 --> 00:32:13,246
participating in the trial.


1019
00:32:14,786 --> 00:32:16,126
It's really important to note


1020
00:32:16,356 --> 00:32:19,656
that the .provisional option is


1021
00:32:19,656 --> 00:32:21,036
in addition to whatever other


1022
00:32:21,036 --> 00:32:22,826
options you may be providing.


1023
00:32:23,626 --> 00:32:24,796
That's because if the users


1024
00:32:24,796 --> 00:32:25,856
decide to keep getting your


1025
00:32:25,856 --> 00:32:27,826
notifications delivered, we want


1026
00:32:27,826 --> 00:32:28,896
to know how you want them


1027
00:32:28,896 --> 00:32:31,736
delivered, with badges or sounds


1028
00:32:31,856 --> 00:32:32,536
or as alerts.


1029
00:32:33,186 --> 00:32:35,436
So that's what provisional


1030
00:32:35,436 --> 00:32:36,386
authorization is.


1031
00:32:36,526 --> 00:32:38,236
It's an automatic trial of the


1032
00:32:38,236 --> 00:32:40,156
notifications from your app to


1033
00:32:40,156 --> 00:32:41,546
help your users make a more


1034
00:32:41,546 --> 00:32:43,616
informed decision about whether


1035
00:32:43,616 --> 00:32:45,116
they want these notifications.


1036
00:32:46,466 --> 00:32:48,366
And again, to encourage your


1037
00:32:48,366 --> 00:32:49,716
users to keep getting your


1038
00:32:49,716 --> 00:32:51,586
notifications delivered, it's


1039
00:32:51,626 --> 00:32:53,266
really important to make the


1040
00:32:53,266 --> 00:32:55,316
content in your notifications


1041
00:32:55,576 --> 00:32:56,066
relevant.


1042
00:32:57,226 --> 00:32:59,756
And also, it's really important


1043
00:32:59,756 --> 00:33:01,356
to use .provisional as a


1044
00:33:01,406 --> 00:33:03,506
qualifier option in addition to


1045
00:33:03,766 --> 00:33:05,206
whatever other options you're


1046
00:33:05,206 --> 00:33:05,846
requesting.


1047
00:33:06,806 --> 00:33:07,836
That's what we have for


1048
00:33:07,836 --> 00:33:09,426
provisional authorization.


1049
00:33:10,016 --> 00:33:14,816
And the last big feature that I


1050
00:33:14,816 --> 00:33:16,396
want to talk to you about are


1051
00:33:16,396 --> 00:33:17,456
critical alerts.


1052
00:33:18,096 --> 00:33:22,466
Often when I'm in the middle of


1053
00:33:22,466 --> 00:33:23,906
a meeting or attending something


1054
00:33:23,906 --> 00:33:25,906
important, my phone looks like


1055
00:33:25,966 --> 00:33:26,086
this.


1056
00:33:26,506 --> 00:33:27,936
And as you can see, I have do


1057
00:33:27,936 --> 00:33:29,026
not disturb turned on.


1058
00:33:29,736 --> 00:33:31,156
Or at least I have the ringer


1059
00:33:31,156 --> 00:33:32,606
switch turned off so that I


1060
00:33:32,606 --> 00:33:34,476
don't hear any sounds when I get


1061
00:33:34,836 --> 00:33:35,616
notifications.


1062
00:33:36,506 --> 00:33:38,326
And usually this is really good,


1063
00:33:39,346 --> 00:33:42,836
but I would have missed a really


1064
00:33:42,836 --> 00:33:44,626
important notification like this


1065
00:33:44,626 --> 00:33:44,856
one.


1066
00:33:45,606 --> 00:33:46,666
This is a health-related


1067
00:33:46,666 --> 00:33:47,526
notification.


1068
00:33:48,016 --> 00:33:49,326
That's from a glucose monitor


1069
00:33:49,606 --> 00:33:51,336
that's warning me of low blood


1070
00:33:51,336 --> 00:33:53,456
sugar, and this is something I


1071
00:33:53,456 --> 00:33:54,746
would want to see immediately.


1072
00:33:55,996 --> 00:33:58,156
Scenarios like this made us


1073
00:33:58,156 --> 00:34:00,396
realize that we need a new type


1074
00:34:00,396 --> 00:34:02,556
of notification, and this is


1075
00:34:02,556 --> 00:34:04,686
what we call critical alerts.


1076
00:34:05,596 --> 00:34:08,025
Critical alerts are medical- and


1077
00:34:08,025 --> 00:34:09,626
health-related notifications.


1078
00:34:10,706 --> 00:34:12,176
Or home- and security-related


1079
00:34:12,176 --> 00:34:13,005
notifications.


1080
00:34:14,286 --> 00:34:16,406
Or public safety notifications.


1081
00:34:16,766 --> 00:34:18,446
And the key to a critical alert


1082
00:34:19,106 --> 00:34:21,616
is that it requires the user to


1083
00:34:21,616 --> 00:34:22,976
take action immediately.


1084
00:34:26,235 --> 00:34:27,716
The way that critical alerts


1085
00:34:27,746 --> 00:34:30,065
behave is that they bypass both


1086
00:34:30,166 --> 00:34:31,516
do not disturb and the ringer


1087
00:34:31,516 --> 00:34:34,186
switch, and they will play a


1088
00:34:34,186 --> 00:34:34,585
sound.


1089
00:34:34,726 --> 00:34:35,936
And they can even play a custom


1090
00:34:35,936 --> 00:34:36,315
sound.


1091
00:34:37,406 --> 00:34:38,616
But what that means is that


1092
00:34:38,616 --> 00:34:40,896
these are very disruptive, and


1093
00:34:40,896 --> 00:34:42,795
for that reason we don't think


1094
00:34:43,106 --> 00:34:44,806
that all apps should be able to


1095
00:34:44,806 --> 00:34:46,856
send critical notifications.


1096
00:34:47,315 --> 00:34:47,996
Critical alerts.


1097
00:34:49,626 --> 00:34:51,266
So in order to start sending a


1098
00:34:51,266 --> 00:34:53,096
critical alert, you will need to


1099
00:34:53,096 --> 00:34:55,436
apply for entitlement, and you


1100
00:34:55,436 --> 00:34:56,315
can do that on the


1101
00:34:56,315 --> 00:34:58,176
developer.apple website.


1102
00:34:59,776 --> 00:35:01,236
This is what a critical alert


1103
00:35:01,236 --> 00:35:03,556
looks like, and you can see that


1104
00:35:03,556 --> 00:35:05,446
it has a unique icon indicating


1105
00:35:05,446 --> 00:35:06,156
that it's critical.


1106
00:35:06,706 --> 00:35:08,486
And it would have also come in


1107
00:35:08,616 --> 00:35:08,976
with a sound.


1108
00:35:12,336 --> 00:35:14,126
Critical alerts also have their


1109
00:35:14,196 --> 00:35:16,256
own section in notifications


1110
00:35:16,256 --> 00:35:16,626
settings.


1111
00:35:17,996 --> 00:35:20,446
This means that a user can


1112
00:35:20,446 --> 00:35:22,126
choose to allow critical alerts


1113
00:35:22,126 --> 00:35:24,456
for a particular application but


1114
00:35:24,456 --> 00:35:26,276
choose not to allow any other


1115
00:35:26,276 --> 00:35:27,386
type of notification.


1116
00:35:27,926 --> 00:35:32,306
And before users start receiving


1117
00:35:32,306 --> 00:35:33,936
critical alerts, they will have


1118
00:35:33,936 --> 00:35:35,866
to accept a prompt that looks


1119
00:35:35,866 --> 00:35:37,416
like this that's asking them


1120
00:35:37,416 --> 00:35:39,216
specifically whether they want


1121
00:35:39,216 --> 00:35:41,046
to accept critical alerts from a


1122
00:35:41,046 --> 00:35:42,266
particular application.


1123
00:35:43,576 --> 00:35:45,346
So, of course, in order to start


1124
00:35:45,456 --> 00:35:47,196
sending critical alerts, you'll


1125
00:35:47,196 --> 00:35:48,576
have to request authorization.


1126
00:35:49,266 --> 00:35:50,536
So after you apply for


1127
00:35:50,536 --> 00:35:53,166
entitlement and get it, in the


1128
00:35:53,166 --> 00:35:54,356
place where you regularly


1129
00:35:54,356 --> 00:35:56,586
request authorization, in


1130
00:35:56,586 --> 00:35:58,366
addition to whatever other


1131
00:35:58,366 --> 00:36:00,916
options you want to request, you


1132
00:36:00,916 --> 00:36:02,146
can also request a


1133
00:36:02,146 --> 00:36:04,096
.criticalAlert option.


1134
00:36:05,126 --> 00:36:07,086
And this will give your users


1135
00:36:07,086 --> 00:36:07,696
the prompt.


1136
00:36:13,046 --> 00:36:14,116
And let's see how it actually


1137
00:36:14,116 --> 00:36:15,416
set up and send a critical


1138
00:36:15,416 --> 00:36:15,646
alert.


1139
00:36:15,646 --> 00:36:17,596
It actually behaves very


1140
00:36:17,596 --> 00:36:18,926
similarly to a regular


1141
00:36:18,926 --> 00:36:19,696
notification.


1142
00:36:20,376 --> 00:36:21,726
You can see that I just set up a


1143
00:36:21,726 --> 00:36:23,476
notification with the title body


1144
00:36:23,476 --> 00:36:25,576
and category identifier, but


1145
00:36:25,576 --> 00:36:26,986
what distinguishes this as a


1146
00:36:26,986 --> 00:36:28,536
critical alert is that it plays


1147
00:36:28,536 --> 00:36:29,136
a sound.


1148
00:36:29,596 --> 00:36:31,046
So I need to set a critical


1149
00:36:31,046 --> 00:36:32,166
alert sound.


1150
00:36:32,806 --> 00:36:35,346
And here, you can see that I'm


1151
00:36:35,346 --> 00:36:37,286
setting the default critical


1152
00:36:37,286 --> 00:36:38,926
alert sound that's provided by


1153
00:36:38,926 --> 00:36:39,456
the framework.


1154
00:36:40,186 --> 00:36:43,756
I can also set a custom sound.


1155
00:36:44,716 --> 00:36:46,726
And I can also set a custom


1156
00:36:46,816 --> 00:36:48,006
audio volume level.


1157
00:36:48,996 --> 00:36:52,896
And of course, critical alerts


1158
00:36:52,896 --> 00:36:54,926
can also be push notifications


1159
00:36:55,326 --> 00:36:57,356
so all of this information can


1160
00:36:57,356 --> 00:36:59,616
be set in the push payload as


1161
00:36:59,616 --> 00:36:59,826
well.


1162
00:37:01,106 --> 00:37:01,966
So that's what we have for


1163
00:37:01,966 --> 00:37:02,746
critical alerts.


1164
00:37:03,356 --> 00:37:04,586
They're a new type of


1165
00:37:05,326 --> 00:37:07,266
notification that requires the


1166
00:37:07,306 --> 00:37:08,886
users to take action


1167
00:37:08,966 --> 00:37:09,796
immediately.


1168
00:37:10,376 --> 00:37:12,666
And they're very disruptive, so


1169
00:37:12,666 --> 00:37:14,206
you need entitlement to be able


1170
00:37:14,206 --> 00:37:14,656
to send them.


1171
00:37:18,496 --> 00:37:20,226
So that's all the new exciting


1172
00:37:20,226 --> 00:37:22,396
APIs that we have for you today.


1173
00:37:23,036 --> 00:37:24,486
I just want to quickly go over


1174
00:37:24,816 --> 00:37:25,996
all the things that we covered.


1175
00:37:26,656 --> 00:37:30,656
We talked about how you can use


1176
00:37:30,756 --> 00:37:32,356
thread identifiers to group your


1177
00:37:32,356 --> 00:37:35,136
notifications to help your users


1178
00:37:35,136 --> 00:37:36,576
organize their notification


1179
00:37:36,576 --> 00:37:38,706
lists better.


1180
00:37:38,896 --> 00:37:40,206
We talked about all the great


1181
00:37:40,206 --> 00:37:42,116
new APIs around notification


1182
00:37:42,116 --> 00:37:44,046
content extensions, which will


1183
00:37:44,046 --> 00:37:45,366
help you make your rich


1184
00:37:45,366 --> 00:37:46,956
notifications much more


1185
00:37:46,996 --> 00:37:47,676
interactive.


1186
00:37:48,256 --> 00:37:51,176
We talked about how you can


1187
00:37:51,176 --> 00:37:52,796
provide a custom settings view


1188
00:37:52,796 --> 00:37:54,746
within your app to allow your


1189
00:37:54,746 --> 00:37:57,256
users more granular control over


1190
00:37:57,256 --> 00:37:59,626
what kind of notifications they


1191
00:37:59,626 --> 00:38:02,926
want to receive.


1192
00:38:03,096 --> 00:38:04,496
We also talked about provisional


1193
00:38:04,496 --> 00:38:06,086
authorizations, which is an


1194
00:38:06,146 --> 00:38:07,306
automatic trial of the


1195
00:38:07,306 --> 00:38:08,876
notifications from your app,


1196
00:38:09,626 --> 00:38:10,806
which will help you users make a


1197
00:38:10,806 --> 00:38:13,196
more informed decision about


1198
00:38:13,196 --> 00:38:14,146
whether they want these


1199
00:38:14,146 --> 00:38:15,386
notifications or not.


1200
00:38:15,956 --> 00:38:18,416
And last, we talked about


1201
00:38:18,456 --> 00:38:20,546
critical alerts, which are a new


1202
00:38:20,546 --> 00:38:22,606
type of notification that


1203
00:38:22,976 --> 00:38:24,566
requires the user to take action


1204
00:38:24,566 --> 00:38:25,976
immediately and that are


1205
00:38:25,976 --> 00:38:26,686
disruptive.


1206
00:38:27,446 --> 00:38:29,236
So we hope you take advantage of


1207
00:38:29,306 --> 00:38:31,506
all of these great APIs and make


1208
00:38:31,506 --> 00:38:33,236
the notification experience for


1209
00:38:33,236 --> 00:38:34,556
your users even better.


1210
00:38:35,556 --> 00:38:36,886
You can find all the information


1211
00:38:36,886 --> 00:38:37,976
about this session on our


1212
00:38:37,976 --> 00:38:39,206
sessions' page at


1213
00:38:39,206 --> 00:38:40,776
developer.apple.com.


1214
00:38:41,136 --> 00:38:42,726
We're session 710.


1215
00:38:43,406 --> 00:38:45,096
We have another session just


1216
00:38:45,096 --> 00:38:46,636
following this one in hall three


1217
00:38:46,966 --> 00:38:48,136
called using grouped


1218
00:38:48,196 --> 00:38:50,096
notification where we'll help


1219
00:38:50,096 --> 00:38:52,136
you determine how to best group


1220
00:38:52,136 --> 00:38:54,346
notifications for your app.


1221
00:38:54,736 --> 00:38:56,336
We have two notifications labs,


1222
00:38:56,686 --> 00:38:58,176
one today and one tomorrow,


1223
00:38:58,426 --> 00:38:59,636
where you can come and ask the


1224
00:38:59,636 --> 00:39:01,396
engineers on our team any


1225
00:39:01,396 --> 00:39:03,456
questions that you may have.


1226
00:39:03,456 --> 00:39:05,416
And on Friday morning, we have


1227
00:39:05,416 --> 00:39:06,806
an interesting session called


1228
00:39:06,806 --> 00:39:08,166
designing notifications.


1229
00:39:08,656 --> 00:39:09,776
That's going to be hosted by the


1230
00:39:09,776 --> 00:39:11,726
designers who helped us come up


1231
00:39:11,726 --> 00:39:13,526
with the designs for these, and


1232
00:39:13,566 --> 00:39:14,566
they'll be talking about


1233
00:39:14,916 --> 00:39:16,716
notification best practices.


1234
00:39:17,466 --> 00:39:18,866
Thank you and have a great dot


1235
00:39:18,866 --> 00:39:18,976
dot.


1236
00:39:19,508 --> 00:39:21,508
[ Applause ]

